---
layout: post
title: Carbon Reductor 5.7.5
date: '2015-07-27 12:47:31'
---

Несмотря на дождливое лето, сказывающееся на настроении всей команды мы выпускаем новую версию Carbon Reductor даже чуть раньше срока, потому как накопилось довольно много фишек. Надеюсь мы сможем держать этот темп и дальше.

# Carbon Reductor Satellite

Мы выпустили [Carbon Reductor Satellite](https://github.com/carbonsoft/reductor_satellite_installer) и он бесплатен. Для всех. По сути это очень урезанная версия Carbon Reductor, способная лишь осуществлять выгрузки единого реестра. Без фильтрации, диагностики, вебки итд. Да, название для этого мы выбрали исходя исключительно из соображений иронии.

# Система кэширования резолва

- Кэш https не проверяется диагностикой, если фильтрация https отключена.
- Ускорена работа обновления кэша резолва https на 2-3 секунды. Мелочь, но приятно.
- Повышена отказоустойчивость системы кэширования резолва https, возможна его починка или перестроение при сильном повреждении.

# Выгрузки

- Выгрузки теперь используют python-suds, поставляемый с virtualenv в RPM-пакете Carbon Reductor.
- Обработка списков аварийно завершалась, в случае если Carbon Reductor ни разу не разбирал единый реестр (например если выгрузка ещё не настроена и пока тестируется работа на собственных списках).
- Выгрузка единого реестра аварийно завершалась при получении от сервера Роскомнадзора ответа без комментария.
- Теперь при неудачно завершившейся выгрузке единого реестра Carbon Reductor сразу же отправляет уведомление об этом всем системным администраторам.

# Веб-интерфейс

- Все зависимости веб-интерфейса от пакетов python теперь поставляются в virtualenv. Это значительно упростило скрипт установки и избавило от некоторых ошибок при обновлении.
- Появилась возможность редактировать собственные списки провайдера в веб-интерфейсе и применять изменения.
- Возможность скачивать dump.xml (единый реестр запрещённых сайтов) с веб-интерфейса. Возможно не работает в Safari. Firefox, Google Chrome, curl и wget справляются на ура.

# Прочее

- Во всех скриптах, обращающихся к нашим серверам теперь используется перебор нескольких наших серверов при недоступности (регистрация, активация, сигнатуры итд). В наши сервера перечислены как в виде доменов, так и ip (на случай проблем с DNS).
- Поддержка фильтрации кириллических URL, открываемых одним из последних IE.
- Поддержка export/import (бэкап/восстановление настроек) в стартовом скрипте.
- Диагностика теперь ругается на наличие доменов carbonsoft.ru в /etc/hosts
- Локальное меню не запускалось после удаления папки с бэкапами.
- Не сохранялся список из нескольких IP адресов администраторов в мастере первичной настройки и названия провайдера с пробелами.
- Все интерфейсы генерируемые мастером настройки сети теперь содержат строчку NM_CONTROLLED=no (имелись проблемы без неё).
- Добавлен пример хука для распределения прерываний для сетёвок с драйвером vmxnet3 (VMWare).
- Отключена часть устаревших хуков обновления.
