---
layout: post
title: как в telegraf указать разные интервалы сбора с помощью нескольких плагинов-коллекторов
---

## Кратко

указать несколько секций `[inputs.exec]` и у каждой указать свой интервал.

## Конфиг

```
[inputs.exec]
  commands = ["/etc/telegraf/telegraf.d/my-collector.sh 1m"]
  interval = "1m"

[inputs.exec]
  commands = ["/etc/telegraf/telegraf.d/my-collector.sh 10s"]
  interval = "10s"
```

## Зачем такое может понадобиться

1. у вас есть данные, редко изменяющиеся, либо требующие ресурсов и времени на сбор (обращения к внешним серверам)
2. однако есть и данные, которые нужно собирать постоянно и которые собираются быстро (содержимое/размер текстовых файлов, счетчики)
3. вы хотите изолировать сложность двумя местами: свой конфиг в `telegraf.d` и ваш скрипт-коллектор `my-collector.sh`. Что они там будут получать и какие метрики выплевывать - станет заботой тех частей приложения, которые они вызывают.
